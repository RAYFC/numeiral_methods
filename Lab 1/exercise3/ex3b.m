A=[
% 18 rows are chosen and the rank is 16
[1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0];
[0 0 0 0 1 1 1 1 0 0 0 0 0 0 0 0];
[0 0 0 0 0 0 0 0 1 1 1 1 0 0 0 0];
[0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1];
[1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0];
[0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0];
[0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0];
[1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
[0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0];
[0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0];
[0 0 0 1 0 0 1 0 0 1 0 0 1 0 0 0];
[0 0 0 0 0 0 0 1 0 0 1 0 0 1 0 0];
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1];
[0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0];
[1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1];
[0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0];
[0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0];
[0 0 0 0 0 0 1 0 1 0 0 1 0 1 0 0];
   ];

B=[10,26,42,58,28,32,36,1,7,18,34,33,16,4,34,13,11,42];

reduced_A=[
%I just comment out rows to see if the rank of A will reduce until the rank
%is 16 and A is 16x16
%[1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0];
%[0 0 0 0 1 1 1 1 0 0 0 0 0 0 0 0];
[0 0 0 0 0 0 0 0 1 1 1 1 0 0 0 0];
[0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1];
[1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0];
[0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0];
[0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0];
[1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
[0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0];
[0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0];
[0 0 0 1 0 0 1 0 0 1 0 0 1 0 0 0];
[0 0 0 0 0 0 0 1 0 0 1 0 0 1 0 0];
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1];
[0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0];
[1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1];
[0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0];
[0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0];
[0 0 0 0 0 0 1 0 1 0 0 1 0 1 0 0];
   ];

reduced_B=[42,58,28,32,36,1,7,18,34,33,16,4,34,13,11,42];

%by lu function

[L,U]=lu(reduced_A);
lu_x=U\(L\reduced_B');
disp(reshape(lu_x,[4,4])');

%by \ operator

x=A\B';
disp(reshape(x,[4,4])');
